# automp4encoder

ドラッグ＆ドロップで簡単にx264.exeを使って簡単にmp4ファイルにエンコードするためのバッチファイル

## 初期設定

まず、setupフォルダの中にある「AviSynth_260.exe」を実行してavisynthをインストール  
setupフォルダの中のavisynth.dll ファイルは  
C:\Windows\SysWOW64  
もしくは  
C:\Windows\System32  
内にある同名のファイルに上書きすると処理が速くなるかもしれないのでお好みで

## 使用方法

エクスプローラーなどから  
mp4fromavi.bat  
に動画ファイル(.aviや.mp4や.mpgファイル等)をドラッグ＆ドロップ

あとは待つだけで元のaviファイルがあった場所に同ファイル名で拡張子がmp4になったファイルが出来上がり

## カスタマイズ

### 映像エンコード画質の調整

mp4fromavi.bat をメモ帳などで開いて 1行目
````
set VIDEOQUALITY=24
````
の24の数字を変更
0が最高画質で数字が大きいほど圧縮率が上がる。

作者の主観では20以下に下げてもファイルが大きくなるだけで見た目変わらないので20以上推奨
動画編集中の中間ファイル作成の場合は2～4を指定するといいと思う。

### 音声エンコード画質の調整
mp4fromavi.bat をメモ帳などで開いて 2行目
````
set AUDIOQUALITY=0.95
````
の0.95の数字を変更
1が最高音質で数字が小さいほど圧縮率が上がる。最小は0
映像に比べて音声は圧縮率を上げてもたいして容量の削減にならないので高めの設定。
それでも容量を減らしたい場合は 0に近づけていって試してみて。

## あとがき

ありそうな質問  
Q. 100MBギリギリにエンコードしたい。どうしたらいい？  
A. つんでれんこ というソフトを使ってください http://tdenc.com/  
このソフトと同様にドラッグ＆ドロップの操作で100MBピッタリにしてくれます。

Q. avi以外のファイルもエンコードしたい。  
A. サポート済み。avsファイルはまだサポートしてない。

### おまけ機能
* 字幕焼付
setupフォルダの中の「VSFilterMod.dll」 を  
C:\Program Files (x86)\AviSynth 2.5\plugins  
あたり(環境によって別の所かも)にコピーして、  
動画ファイルがエクスプローラーで上に表示されている状態で
動画ファイルとassファイルの2つ選択して、動画ファイルのほうをつまんで  
mp4fromavi.bat  
にドラッグ＆ドロップすると、一緒に字幕も焼き付けられます。  
aviutlとかVirtualDubとかいらないね＾＾

* 送るメニューからエンコード
バッチファイルへのドラッグ＆ドロップが面倒だって思ったら、
mp4fromavi.bat を右クリックして「ショートカット」を作成。
「shell:sendto」フォルダ(エクスプローラーの上のフォルダバーにコピペするといい)にそのショートカットをコピーすると、
ムービーファイル(+assもあってもいい)を選択して右クリック->送る->mp4fromavi.batへのショートカット
で実行できる。

## 更新履歴
2016.02.10 v0.0.2   aviファイル以外の動画ファイルにも対応
2016.02.09 初版作成 単純にaviファイルをmp4にエンコードするだけ




